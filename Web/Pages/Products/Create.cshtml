@page
@model Web.Pages.Products.CreateModel
@{
    ViewData["Title"] = "Add New Product";
}

<!-- Page Header -->
<div class="page-header">
    <h1><i class="fas fa-plus-circle"></i> Add New Product</h1>
    <p>Add a new product to your pharmacy's inventory.</p>
</div>

<!-- Product Form -->
<div class="row">
    <div class="col-md-8">
        <div class="dashboard-card">
            <form method="post">
                <div class="row">
                    <div class="col-md-6">
                        <div class="mb-3">
                            <label asp-for="Product.ProductName" class="form-label">Product Name *</label>
                            <input asp-for="Product.ProductName" class="form-control" placeholder="Enter product name" required>
                            <span asp-validation-for="Product.ProductName" class="text-danger"></span>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="mb-3">
                            <label asp-for="Product.GenericName" class="form-label">Generic Name *</label>
                            <input asp-for="Product.GenericName" class="form-control" placeholder="Enter generic name" required>
                            <span asp-validation-for="Product.GenericName" class="text-danger"></span>
                        </div>
                    </div>
                </div>

                <div class="row">
                    <div class="col-md-6">
                        <div class="mb-3">
                            <label asp-for="Product.Manufacturer" class="form-label">Manufacturer *</label>
                            <input asp-for="Product.Manufacturer" class="form-control" placeholder="Enter manufacturer" required>
                            <span asp-validation-for="Product.Manufacturer" class="text-danger"></span>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="mb-3">
                            <label asp-for="Product.Category" class="form-label">Category *</label>
                            <select asp-for="Product.Category" class="form-control" required>
                                <option value="">Select Category</option>
                                <option value="Pain Relief">Pain Relief</option>
                                <option value="Antibiotic">Antibiotic</option>
                                <option value="Supplements">Supplements</option>
                                <option value="Digestive">Digestive</option>
                                <option value="Diabetes">Diabetes</option>
                                <option value="Cardiovascular">Cardiovascular</option>
                                <option value="Respiratory">Respiratory</option>
                                <option value="Dermatology">Dermatology</option>
                                <option value="Other">Other</option>
                            </select>
                            <span asp-validation-for="Product.Category" class="text-danger"></span>
                        </div>
                    </div>
                </div>

                <div class="row">
                    <div class="col-md-6">
                        <div class="mb-3">
                            <label asp-for="Product.Barcode" class="form-label">Barcode</label>
                            <input asp-for="Product.Barcode" class="form-control" placeholder="Enter barcode (optional)">
                            <span asp-validation-for="Product.Barcode" class="text-danger"></span>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="mb-3">
                            <label asp-for="Product.LowStockThreshold" class="form-label">Low Stock Threshold</label>
                            <input asp-for="Product.LowStockThreshold" class="form-control" type="number" min="0" value="10">
                            <span asp-validation-for="Product.LowStockThreshold" class="text-danger"></span>
                        </div>
                    </div>
                </div>

                <div class="row">
                    <div class="col-md-4">
                        <div class="mb-3">
                            <label asp-for="Product.UnitPrice" class="form-label">Unit Price *</label>
                            <div class="input-group">
                                <span class="input-group-text">$</span>
                                <input asp-for="Product.UnitPrice" class="form-control" type="number" step="0.01" min="0" placeholder="0.00" required>
                            </div>
                            <span asp-validation-for="Product.UnitPrice" class="text-danger"></span>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="mb-3">
                            <label asp-for="Product.DefaultRetailPrice" class="form-label">Retail Price *</label>
                            <div class="input-group">
                                <span class="input-group-text">$</span>
                                <input asp-for="Product.DefaultRetailPrice" class="form-control" type="number" step="0.01" min="0" placeholder="0.00" required>
                            </div>
                            <span asp-validation-for="Product.DefaultRetailPrice" class="text-danger"></span>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="mb-3">
                            <label asp-for="Product.DefaultWholeSalePrice" class="form-label">Wholesale Price *</label>
                            <div class="input-group">
                                <span class="input-group-text">$</span>
                                <input asp-for="Product.DefaultWholeSalePrice" class="form-control" type="number" step="0.01" min="0" placeholder="0.00" required>
                            </div>
                            <span asp-validation-for="Product.DefaultWholeSalePrice" class="text-danger"></span>
                        </div>
                    </div>
                </div>

                <div class="mb-3">
                    <label asp-for="Product.Description" class="form-label">Description</label>
                    <textarea asp-for="Product.Description" class="form-control" rows="3" placeholder="Enter product description (optional)"></textarea>
                    <span asp-validation-for="Product.Description" class="text-danger"></span>
                </div>

                <div class="mb-3">
                    <div class="form-check">
                        <input asp-for="Product.IsActive" class="form-check-input" type="checkbox" checked>
                        <label asp-for="Product.IsActive" class="form-check-label">
                            Active Product
                        </label>
                    </div>
                </div>

                <div class="d-flex justify-content-between">
                    <a href="/Products" class="btn btn-secondary">
                        <i class="fas fa-arrow-left"></i> Back to Products
                    </a>
                    <button type="submit" class="btn btn-primary">
                        <i class="fas fa-save"></i> Create Product
                    </button>
                </div>
            </form>
        </div>
    </div>

    <div class="col-md-4">
        <div class="dashboard-card">
            <h5><i class="fas fa-info-circle"></i> Product Information</h5>
            <div class="alert alert-info">
                <strong>Required Fields:</strong>
                <ul class="mb-0 mt-2">
                    <li>Product Name</li>
                    <li>Generic Name</li>
                    <li>Manufacturer</li>
                    <li>Category</li>
                    <li>Unit Price</li>
                    <li>Retail Price</li>
                    <li>Wholesale Price</li>
                </ul>
            </div>
            
            <h6 class="mt-3">Pricing Guidelines:</h6>
            <ul class="small text-muted">
                <li><strong>Unit Price:</strong> Cost price from supplier</li>
                <li><strong>Retail Price:</strong> Selling price to customers</li>
                <li><strong>Wholesale Price:</strong> Bulk selling price</li>
            </ul>

            <h6 class="mt-3">Stock Management:</h6>
            <ul class="small text-muted">
                <li>Low stock threshold triggers alerts</li>
                <li>Default threshold is 10 units</li>
                <li>You can adjust this per product</li>
            </ul>
        </div>
    </div>
</div>

@section Scripts {
    <partial name="_ValidationScriptsPartial" />
    
    <script>
        // Auto-calculate retail price based on unit price
        document.getElementById('Product_UnitPrice').addEventListener('input', function() {
            const unitPrice = parseFloat(this.value) || 0;
            const retailPrice = unitPrice * 1.5; // 50% markup
            const wholesalePrice = unitPrice * 1.2; // 20% markup
            
            document.getElementById('Product_DefaultRetailPrice').value = retailPrice.toFixed(2);
            document.getElementById('Product_DefaultWholeSalePrice').value = wholesalePrice.toFixed(2);
        });

        // Barcode validation
        document.getElementById('Product_Barcode').addEventListener('input', function() {
            const barcode = this.value;
            if (barcode && barcode.length < 8) {
                this.setCustomValidity('Barcode must be at least 8 characters long');
            } else {
                this.setCustomValidity('');
            }
        });
    </script>
}
